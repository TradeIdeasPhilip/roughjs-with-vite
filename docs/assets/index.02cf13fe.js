var ne=Object.defineProperty,oe=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var Tt=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var It=(o,t,s)=>t in o?ne(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,At=(o,t)=>{for(var s in t||(t={}))re.call(t,s)&&It(o,s,t[s]);if(Tt)for(var s of Tt(t))ie.call(t,s)&&It(o,s,t[s]);return o},Ct=(o,t)=>oe(o,ae(t));var Dt=(o,t,s)=>{if(!t.has(o))throw TypeError("Cannot "+s)};var j=(o,t,s)=>(Dt(o,t,"read from private field"),s?s.call(o):t.get(o)),gt=(o,t,s)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,s)},nt=(o,t,s,e)=>(Dt(o,t,"write to private field"),e?e.call(o,s):t.set(o,s),s);const he=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};he();function Mt(o,t,s){if(o&&o.length){const[e,n]=t,a=Math.PI/180*s,i=Math.cos(a),r=Math.sin(a);o.forEach(l=>{const[f,h]=l;l[0]=(f-e)*i-(h-n)*r+e,l[1]=(f-e)*r+(h-n)*i+n})}}function dt(o){const t=o[0],s=o[1];return Math.sqrt(Math.pow(t[0]-s[0],2)+Math.pow(t[1]-s[1],2))}function et(o,t){const s=t.hachureAngle+90;let e=t.hachureGap;e<0&&(e=4*t.strokeWidth),e=Math.max(e,.1);const n=[0,0];if(s)for(const i of o)Mt(i,n,s);const a=function(i,r){const l=[];for(const u of i){const c=[...u];c[0].join(",")!==c[c.length-1].join(",")&&c.push([c[0][0],c[0][1]]),c.length>2&&l.push(c)}const f=[];r=Math.max(r,.1);const h=[];for(const u of l)for(let c=0;c<u.length-1;c++){const M=u[c],g=u[c+1];if(M[1]!==g[1]){const y=Math.min(M[1],g[1]);h.push({ymin:y,ymax:Math.max(M[1],g[1]),x:y===M[1]?M[0]:g[0],islope:(g[0]-M[0])/(g[1]-M[1])})}}if(h.sort((u,c)=>u.ymin<c.ymin?-1:u.ymin>c.ymin?1:u.x<c.x?-1:u.x>c.x?1:u.ymax===c.ymax?0:(u.ymax-c.ymax)/Math.abs(u.ymax-c.ymax)),!h.length)return f;let d=[],p=h[0].ymin;for(;d.length||h.length;){if(h.length){let u=-1;for(let c=0;c<h.length&&!(h[c].ymin>p);c++)u=c;h.splice(0,u+1).forEach(c=>{d.push({s:p,edge:c})})}if(d=d.filter(u=>!(u.edge.ymax<=p)),d.sort((u,c)=>u.edge.x===c.edge.x?0:(u.edge.x-c.edge.x)/Math.abs(u.edge.x-c.edge.x)),d.length>1)for(let u=0;u<d.length;u+=2){const c=u+1;if(c>=d.length)break;const M=d[u].edge,g=d[c].edge;f.push([[Math.round(M.x),p],[Math.round(g.x),p]])}p+=r,d.forEach(u=>{u.edge.x=u.edge.x+r*u.edge.islope})}return f}(o,e);if(s){for(const i of o)Mt(i,n,-s);(function(i,r,l){const f=[];i.forEach(h=>f.push(...h)),Mt(f,r,l)})(a,n,-s)}return a}class vt{constructor(t){this.helper=t}fillPolygons(t,s){return this._fillPolygons(t,s)}_fillPolygons(t,s){const e=et(t,s);return{type:"fillSketch",ops:this.renderLines(e,s)}}renderLines(t,s){const e=[];for(const n of t)e.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],s));return e}}class ce extends vt{fillPolygons(t,s){let e=s.hachureGap;e<0&&(e=4*s.strokeWidth),e=Math.max(e,.1);const n=et(t,Object.assign({},s,{hachureGap:e})),a=Math.PI/180*s.hachureAngle,i=[],r=.5*e*Math.cos(a),l=.5*e*Math.sin(a);for(const[f,h]of n)dt([f,h])&&i.push([[f[0]-r,f[1]+l],[...h]],[[f[0]+r,f[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(i,s)}}}class le extends vt{fillPolygons(t,s){const e=this._fillPolygons(t,s),n=Object.assign({},s,{hachureAngle:s.hachureAngle+90}),a=this._fillPolygons(t,n);return e.ops=e.ops.concat(a.ops),e}}class ue{constructor(t){this.helper=t}fillPolygons(t,s){const e=et(t,s=Object.assign({},s,{hachureAngle:0}));return this.dotsOnLines(e,s)}dotsOnLines(t,s){const e=[];let n=s.hachureGap;n<0&&(n=4*s.strokeWidth),n=Math.max(n,.1);let a=s.fillWeight;a<0&&(a=s.strokeWidth/2);const i=n/4;for(const r of t){const l=dt(r),f=l/n,h=Math.ceil(f)-1,d=l-h*n,p=(r[0][0]+r[1][0])/2-n/4,u=Math.min(r[0][1],r[1][1]);for(let c=0;c<h;c++){const M=u+d+c*n,g=p-i+2*Math.random()*i,y=M-i+2*Math.random()*i,m=this.helper.ellipse(g,y,a,a,s);e.push(...m.ops)}}return{type:"fillSketch",ops:e}}}class fe{constructor(t){this.helper=t}fillPolygons(t,s){const e=et(t,s);return{type:"fillSketch",ops:this.dashedLine(e,s)}}dashedLine(t,s){const e=s.dashOffset<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashOffset,n=s.dashGap<0?s.hachureGap<0?4*s.strokeWidth:s.hachureGap:s.dashGap,a=[];return t.forEach(i=>{const r=dt(i),l=Math.floor(r/(e+n)),f=(r+n-l*(e+n))/2;let h=i[0],d=i[1];h[0]>d[0]&&(h=i[1],d=i[0]);const p=Math.atan((d[1]-h[1])/(d[0]-h[0]));for(let u=0;u<l;u++){const c=u*(e+n),M=c+e,g=[h[0]+c*Math.cos(p)+f*Math.cos(p),h[1]+c*Math.sin(p)+f*Math.sin(p)],y=[h[0]+M*Math.cos(p)+f*Math.cos(p),h[1]+M*Math.sin(p)+f*Math.sin(p)];a.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],s))}}),a}}class pe{constructor(t){this.helper=t}fillPolygons(t,s){const e=s.hachureGap<0?4*s.strokeWidth:s.hachureGap,n=s.zigzagOffset<0?e:s.zigzagOffset,a=et(t,s=Object.assign({},s,{hachureGap:e+n}));return{type:"fillSketch",ops:this.zigzagLines(a,n,s)}}zigzagLines(t,s,e){const n=[];return t.forEach(a=>{const i=dt(a),r=Math.round(i/(2*s));let l=a[0],f=a[1];l[0]>f[0]&&(l=a[1],f=a[0]);const h=Math.atan((f[1]-l[1])/(f[0]-l[0]));for(let d=0;d<r;d++){const p=2*d*s,u=2*(d+1)*s,c=Math.sqrt(2*Math.pow(s,2)),M=[l[0]+p*Math.cos(h),l[1]+p*Math.sin(h)],g=[l[0]+u*Math.cos(h),l[1]+u*Math.sin(h)],y=[M[0]+c*Math.cos(h+Math.PI/4),M[1]+c*Math.sin(h+Math.PI/4)];n.push(...this.helper.doubleLineOps(M[0],M[1],y[0],y[1],e),...this.helper.doubleLineOps(y[0],y[1],g[0],g[1],e))}}),n}}const L={};class de{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ot={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function yt(o,t){return o.type===t}function mt(o){const t=[],s=function(i){const r=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))r[r.length]={type:0,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];r[r.length]={type:1,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return r[r.length]={type:2,text:""},r}(o);let e="BOD",n=0,a=s[n];for(;!yt(a,2);){let i=0;const r=[];if(e==="BOD"){if(a.text!=="M"&&a.text!=="m")return mt("M0,0"+o);n++,i=ot[a.text],e=a.text}else yt(a,1)?i=ot[e]:(n++,i=ot[a.text],e=a.text);if(!(n+i<s.length))throw new Error("Path data ended short");for(let l=n;l<n+i;l++){const f=s[l];if(!yt(f,1))throw new Error("Param not a number: "+e+","+f.text);r[r.length]=+f.text}if(typeof ot[e]!="number")throw new Error("Bad segment: "+e);{const l={key:e,data:r};t.push(l),n+=i,a=s[n],e==="M"&&(e="L"),e==="m"&&(e="l")}}return t}function Et(o){let t=0,s=0,e=0,n=0;const a=[];for(const{key:i,data:r}of o)switch(i){case"M":a.push({key:"M",data:[...r]}),[t,s]=r,[e,n]=r;break;case"m":t+=r[0],s+=r[1],a.push({key:"M",data:[t,s]}),e=t,n=s;break;case"L":a.push({key:"L",data:[...r]}),[t,s]=r;break;case"l":t+=r[0],s+=r[1],a.push({key:"L",data:[t,s]});break;case"C":a.push({key:"C",data:[...r]}),t=r[4],s=r[5];break;case"c":{const l=r.map((f,h)=>h%2?f+s:f+t);a.push({key:"C",data:l}),t=l[4],s=l[5];break}case"Q":a.push({key:"Q",data:[...r]}),t=r[2],s=r[3];break;case"q":{const l=r.map((f,h)=>h%2?f+s:f+t);a.push({key:"Q",data:l}),t=l[2],s=l[3];break}case"A":a.push({key:"A",data:[...r]}),t=r[5],s=r[6];break;case"a":t+=r[5],s+=r[6],a.push({key:"A",data:[r[0],r[1],r[2],r[3],r[4],t,s]});break;case"H":a.push({key:"H",data:[...r]}),t=r[0];break;case"h":t+=r[0],a.push({key:"H",data:[t]});break;case"V":a.push({key:"V",data:[...r]}),s=r[0];break;case"v":s+=r[0],a.push({key:"V",data:[s]});break;case"S":a.push({key:"S",data:[...r]}),t=r[2],s=r[3];break;case"s":{const l=r.map((f,h)=>h%2?f+s:f+t);a.push({key:"S",data:l}),t=l[2],s=l[3];break}case"T":a.push({key:"T",data:[...r]}),t=r[0],s=r[1];break;case"t":t+=r[0],s+=r[1],a.push({key:"T",data:[t,s]});break;case"Z":case"z":a.push({key:"Z",data:[]}),t=e,s=n}return a}function Wt(o){const t=[];let s="",e=0,n=0,a=0,i=0,r=0,l=0;for(const{key:f,data:h}of o){switch(f){case"M":t.push({key:"M",data:[...h]}),[e,n]=h,[a,i]=h;break;case"C":t.push({key:"C",data:[...h]}),e=h[4],n=h[5],r=h[2],l=h[3];break;case"L":t.push({key:"L",data:[...h]}),[e,n]=h;break;case"H":e=h[0],t.push({key:"L",data:[e,n]});break;case"V":n=h[0],t.push({key:"L",data:[e,n]});break;case"S":{let d=0,p=0;s==="C"||s==="S"?(d=e+(e-r),p=n+(n-l)):(d=e,p=n),t.push({key:"C",data:[d,p,...h]}),r=h[0],l=h[1],e=h[2],n=h[3];break}case"T":{const[d,p]=h;let u=0,c=0;s==="Q"||s==="T"?(u=e+(e-r),c=n+(n-l)):(u=e,c=n);const M=e+2*(u-e)/3,g=n+2*(c-n)/3,y=d+2*(u-d)/3,m=p+2*(c-p)/3;t.push({key:"C",data:[M,g,y,m,d,p]}),r=u,l=c,e=d,n=p;break}case"Q":{const[d,p,u,c]=h,M=e+2*(d-e)/3,g=n+2*(p-n)/3,y=u+2*(d-u)/3,m=c+2*(p-c)/3;t.push({key:"C",data:[M,g,y,m,u,c]}),r=d,l=p,e=u,n=c;break}case"A":{const d=Math.abs(h[0]),p=Math.abs(h[1]),u=h[2],c=h[3],M=h[4],g=h[5],y=h[6];d===0||p===0?(t.push({key:"C",data:[e,n,g,y,g,y]}),e=g,n=y):(e!==g||n!==y)&&(jt(e,n,g,y,d,p,u,c,M).forEach(function(m){t.push({key:"C",data:m})}),e=g,n=y);break}case"Z":t.push({key:"Z",data:[]}),e=a,n=i}s=f}return t}function J(o,t,s){return[o*Math.cos(s)-t*Math.sin(s),o*Math.sin(s)+t*Math.cos(s)]}function jt(o,t,s,e,n,a,i,r,l,f){const h=(d=i,Math.PI*d/180);var d;let p=[],u=0,c=0,M=0,g=0;if(f)[u,c,M,g]=f;else{[o,t]=J(o,t,-h),[s,e]=J(s,e,-h);const A=(o-s)/2,S=(t-e)/2;let W=A*A/(n*n)+S*S/(a*a);W>1&&(W=Math.sqrt(W),n*=W,a*=W);const Z=n*n,H=a*a,ee=Z*H-Z*S*S-H*A*A,se=Z*S*S+H*A*A,Lt=(r===l?-1:1)*Math.sqrt(Math.abs(ee/se));M=Lt*n*S/a+(o+s)/2,g=Lt*-a*A/n+(t+e)/2,u=Math.asin(parseFloat(((t-g)/a).toFixed(9))),c=Math.asin(parseFloat(((e-g)/a).toFixed(9))),o<M&&(u=Math.PI-u),s<M&&(c=Math.PI-c),u<0&&(u=2*Math.PI+u),c<0&&(c=2*Math.PI+c),l&&u>c&&(u-=2*Math.PI),!l&&c>u&&(c-=2*Math.PI)}let y=c-u;if(Math.abs(y)>120*Math.PI/180){const A=c,S=s,W=e;c=l&&c>u?u+120*Math.PI/180*1:u+120*Math.PI/180*-1,p=jt(s=M+n*Math.cos(c),e=g+a*Math.sin(c),S,W,n,a,i,0,l,[c,A,M,g])}y=c-u;const m=Math.cos(u),O=Math.sin(u),C=Math.cos(c),w=Math.sin(c),T=Math.tan(y/4),G=4/3*n*T,E=4/3*a*T,st=[o,t],D=[o+G*O,t-E*m],V=[s+G*w,e-E*C],Ot=[s,e];if(D[0]=2*st[0]-D[0],D[1]=2*st[1]-D[1],f)return[D,V,Ot].concat(p);{p=[D,V,Ot].concat(p);const A=[];for(let S=0;S<p.length;S+=3){const W=J(p[S][0],p[S][1],h),Z=J(p[S+1][0],p[S+1][1],h),H=J(p[S+2][0],p[S+2][1],h);A.push([W[0],W[1],Z[0],Z[1],H[0],H[1]])}return A}}const ge={randOffset:function(o,t){return k(o,t)},randOffsetWithRange:function(o,t,s){return lt(o,t,s)},ellipse:function(o,t,s,e,n){const a=Nt(s,e,n);return xt(o,t,n,a).opset},doubleLineOps:function(o,t,s,e,n){return R(o,t,s,e,n,!0)}};function Bt(o,t,s,e,n){return{type:"path",ops:R(o,t,s,e,n)}}function it(o,t,s){const e=(o||[]).length;if(e>2){const n=[];for(let a=0;a<e-1;a++)n.push(...R(o[a][0],o[a][1],o[a+1][0],o[a+1][1],s));return t&&n.push(...R(o[e-1][0],o[e-1][1],o[0][0],o[0][1],s)),{type:"path",ops:n}}return e===2?Bt(o[0][0],o[0][1],o[1][0],o[1][1],s):{type:"path",ops:[]}}function Me(o,t,s,e,n){return function(a,i){return it(a,!0,i)}([[o,t],[o+s,t],[o+s,t+e],[o,t+e]],n)}function ye(o,t){let s=$t(o,1*(1+.2*t.roughness),t);if(!t.disableMultiStroke){const e=$t(o,1.5*(1+.22*t.roughness),function(n){const a=Object.assign({},n);return a.randomizer=void 0,n.seed&&(a.seed=n.seed+1),a}(t));s=s.concat(e)}return{type:"path",ops:s}}function Nt(o,t,s){const e=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(o/2,2)+Math.pow(t/2,2))/2)),n=Math.ceil(Math.max(s.curveStepCount,s.curveStepCount/Math.sqrt(200)*e)),a=2*Math.PI/n;let i=Math.abs(o/2),r=Math.abs(t/2);const l=1-s.curveFitting;return i+=k(i*l,s),r+=k(r*l,s),{increment:a,rx:i,ry:r}}function xt(o,t,s,e){const[n,a]=Ft(e.increment,o,t,e.rx,e.ry,1,e.increment*lt(.1,lt(.4,1,s),s),s);let i=ut(n,null,s);if(!s.disableMultiStroke&&s.roughness!==0){const[r]=Ft(e.increment,o,t,e.rx,e.ry,1.5,0,s),l=ut(r,null,s);i=i.concat(l)}return{estimatedPoints:a,opset:{type:"path",ops:i}}}function _t(o,t,s,e,n,a,i,r,l){const f=o,h=t;let d=Math.abs(s/2),p=Math.abs(e/2);d+=k(.01*d,l),p+=k(.01*p,l);let u=n,c=a;for(;u<0;)u+=2*Math.PI,c+=2*Math.PI;c-u>2*Math.PI&&(u=0,c=2*Math.PI);const M=2*Math.PI/l.curveStepCount,g=Math.min(M/2,(c-u)/2),y=Rt(g,f,h,d,p,u,c,1,l);if(!l.disableMultiStroke){const m=Rt(g,f,h,d,p,u,c,1.5,l);y.push(...m)}return i&&(r?y.push(...R(f,h,f+d*Math.cos(u),h+p*Math.sin(u),l),...R(f,h,f+d*Math.cos(c),h+p*Math.sin(c),l)):y.push({op:"lineTo",data:[f,h]},{op:"lineTo",data:[f+d*Math.cos(u),h+p*Math.sin(u)]})),{type:"path",ops:y}}function at(o,t){const s=[];for(const e of o)if(e.length){const n=t.maxRandomnessOffset||0,a=e.length;if(a>2){s.push({op:"move",data:[e[0][0]+k(n,t),e[0][1]+k(n,t)]});for(let i=1;i<a;i++)s.push({op:"lineTo",data:[e[i][0]+k(n,t),e[i][1]+k(n,t)]})}}return{type:"fillPath",ops:s}}function Q(o,t){return function(s,e){let n=s.fillStyle||"hachure";if(!L[n])switch(n){case"zigzag":L[n]||(L[n]=new ce(e));break;case"cross-hatch":L[n]||(L[n]=new le(e));break;case"dots":L[n]||(L[n]=new ue(e));break;case"dashed":L[n]||(L[n]=new fe(e));break;case"zigzag-line":L[n]||(L[n]=new pe(e));break;case"hachure":default:n="hachure",L[n]||(L[n]=new vt(e))}return L[n]}(t,ge).fillPolygons(o,t)}function Zt(o){return o.randomizer||(o.randomizer=new de(o.seed||0)),o.randomizer.next()}function lt(o,t,s,e=1){return s.roughness*e*(Zt(s)*(t-o)+o)}function k(o,t,s=1){return lt(-o,o,t,s)}function R(o,t,s,e,n,a=!1){const i=a?n.disableMultiStrokeFill:n.disableMultiStroke,r=Gt(o,t,s,e,n,!0,!1);if(i)return r;const l=Gt(o,t,s,e,n,!0,!0);return r.concat(l)}function Gt(o,t,s,e,n,a,i){const r=Math.pow(o-s,2)+Math.pow(t-e,2),l=Math.sqrt(r);let f=1;f=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>r&&(h=l/10);const d=h/2,p=.2+.2*Zt(n);let u=n.bowing*n.maxRandomnessOffset*(e-t)/200,c=n.bowing*n.maxRandomnessOffset*(o-s)/200;u=k(u,n,f),c=k(c,n,f);const M=[],g=()=>k(d,n,f),y=()=>k(h,n,f),m=n.preserveVertices;return a&&(i?M.push({op:"move",data:[o+(m?0:g()),t+(m?0:g())]}):M.push({op:"move",data:[o+(m?0:k(h,n,f)),t+(m?0:k(h,n,f))]})),i?M.push({op:"bcurveTo",data:[u+o+(s-o)*p+g(),c+t+(e-t)*p+g(),u+o+2*(s-o)*p+g(),c+t+2*(e-t)*p+g(),s+(m?0:g()),e+(m?0:g())]}):M.push({op:"bcurveTo",data:[u+o+(s-o)*p+y(),c+t+(e-t)*p+y(),u+o+2*(s-o)*p+y(),c+t+2*(e-t)*p+y(),s+(m?0:y()),e+(m?0:y())]}),M}function $t(o,t,s){const e=[];e.push([o[0][0]+k(t,s),o[0][1]+k(t,s)]),e.push([o[0][0]+k(t,s),o[0][1]+k(t,s)]);for(let n=1;n<o.length;n++)e.push([o[n][0]+k(t,s),o[n][1]+k(t,s)]),n===o.length-1&&e.push([o[n][0]+k(t,s),o[n][1]+k(t,s)]);return ut(e,null,s)}function ut(o,t,s){const e=o.length,n=[];if(e>3){const a=[],i=1-s.curveTightness;n.push({op:"move",data:[o[1][0],o[1][1]]});for(let r=1;r+2<e;r++){const l=o[r];a[0]=[l[0],l[1]],a[1]=[l[0]+(i*o[r+1][0]-i*o[r-1][0])/6,l[1]+(i*o[r+1][1]-i*o[r-1][1])/6],a[2]=[o[r+1][0]+(i*o[r][0]-i*o[r+2][0])/6,o[r+1][1]+(i*o[r][1]-i*o[r+2][1])/6],a[3]=[o[r+1][0],o[r+1][1]],n.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(t&&t.length===2){const r=s.maxRandomnessOffset;n.push({op:"lineTo",data:[t[0]+k(r,s),t[1]+k(r,s)]})}}else e===3?(n.push({op:"move",data:[o[1][0],o[1][1]]}),n.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[2][0],o[2][1]]})):e===2&&n.push(...R(o[0][0],o[0][1],o[1][0],o[1][1],s));return n}function Ft(o,t,s,e,n,a,i,r){const l=[],f=[];if(r.roughness===0){o/=4,f.push([t+e*Math.cos(-o),s+n*Math.sin(-o)]);for(let h=0;h<=2*Math.PI;h+=o){const d=[t+e*Math.cos(h),s+n*Math.sin(h)];l.push(d),f.push(d)}f.push([t+e*Math.cos(0),s+n*Math.sin(0)]),f.push([t+e*Math.cos(o),s+n*Math.sin(o)])}else{const h=k(.5,r)-Math.PI/2;f.push([k(a,r)+t+.9*e*Math.cos(h-o),k(a,r)+s+.9*n*Math.sin(h-o)]);const d=2*Math.PI+h-.01;for(let p=h;p<d;p+=o){const u=[k(a,r)+t+e*Math.cos(p),k(a,r)+s+n*Math.sin(p)];l.push(u),f.push(u)}f.push([k(a,r)+t+e*Math.cos(h+2*Math.PI+.5*i),k(a,r)+s+n*Math.sin(h+2*Math.PI+.5*i)]),f.push([k(a,r)+t+.98*e*Math.cos(h+i),k(a,r)+s+.98*n*Math.sin(h+i)]),f.push([k(a,r)+t+.9*e*Math.cos(h+.5*i),k(a,r)+s+.9*n*Math.sin(h+.5*i)])}return[f,l]}function Rt(o,t,s,e,n,a,i,r,l){const f=a+k(.1,l),h=[];h.push([k(r,l)+t+.9*e*Math.cos(f-o),k(r,l)+s+.9*n*Math.sin(f-o)]);for(let d=f;d<=i;d+=o)h.push([k(r,l)+t+e*Math.cos(d),k(r,l)+s+n*Math.sin(d)]);return h.push([t+e*Math.cos(i),s+n*Math.sin(i)]),h.push([t+e*Math.cos(i),s+n*Math.sin(i)]),ut(h,null,l)}function ke(o,t,s,e,n,a,i,r){const l=[],f=[r.maxRandomnessOffset||1,(r.maxRandomnessOffset||1)+.3];let h=[0,0];const d=r.disableMultiStroke?1:2,p=r.preserveVertices;for(let u=0;u<d;u++)u===0?l.push({op:"move",data:[i[0],i[1]]}):l.push({op:"move",data:[i[0]+(p?0:k(f[0],r)),i[1]+(p?0:k(f[0],r))]}),h=p?[n,a]:[n+k(f[u],r),a+k(f[u],r)],l.push({op:"bcurveTo",data:[o+k(f[u],r),t+k(f[u],r),s+k(f[u],r),e+k(f[u],r),h[0],h[1]]});return l}function X(o){return[...o]}function ht(o,t){return Math.pow(o[0]-t[0],2)+Math.pow(o[1]-t[1],2)}function be(o,t,s){const e=ht(t,s);if(e===0)return ht(o,t);let n=((o[0]-t[0])*(s[0]-t[0])+(o[1]-t[1])*(s[1]-t[1]))/e;return n=Math.max(0,Math.min(1,n)),ht(o,B(t,s,n))}function B(o,t,s){return[o[0]+(t[0]-o[0])*s,o[1]+(t[1]-o[1])*s]}function wt(o,t,s,e){const n=e||[];if(function(r,l){const f=r[l+0],h=r[l+1],d=r[l+2],p=r[l+3];let u=3*h[0]-2*f[0]-p[0];u*=u;let c=3*h[1]-2*f[1]-p[1];c*=c;let M=3*d[0]-2*p[0]-f[0];M*=M;let g=3*d[1]-2*p[1]-f[1];return g*=g,u<M&&(u=M),c<g&&(c=g),u+c}(o,t)<s){const r=o[t+0];n.length?(a=n[n.length-1],i=r,Math.sqrt(ht(a,i))>1&&n.push(r)):n.push(r),n.push(o[t+3])}else{const l=o[t+0],f=o[t+1],h=o[t+2],d=o[t+3],p=B(l,f,.5),u=B(f,h,.5),c=B(h,d,.5),M=B(p,u,.5),g=B(u,c,.5),y=B(M,g,.5);wt([l,p,M,y],0,s,n),wt([y,g,c,d],0,s,n)}var a,i;return n}function me(o,t){return ft(o,0,o.length,t)}function ft(o,t,s,e,n){const a=n||[],i=o[t],r=o[s-1];let l=0,f=1;for(let h=t+1;h<s-1;++h){const d=be(o[h],i,r);d>l&&(l=d,f=h)}return Math.sqrt(l)>e?(ft(o,t,f+1,e,a),ft(o,f,s,e,a)):(a.length||a.push(i),a.push(r)),a}function qt(o,t=.15,s){const e=[],n=(o.length-1)/3;for(let a=0;a<n;a++)wt(o,3*a,t,e);return s&&s>0?ft(e,0,e.length,s):e}const I="none";class pt{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,s,e){return{shape:t,sets:s||[],options:e||this.defaultOptions}}line(t,s,e,n,a){const i=this._o(a);return this._d("line",[Bt(t,s,e,n,i)],i)}rectangle(t,s,e,n,a){const i=this._o(a),r=[],l=Me(t,s,e,n,i);if(i.fill){const f=[[t,s],[t+e,s],[t+e,s+n],[t,s+n]];i.fillStyle==="solid"?r.push(at([f],i)):r.push(Q([f],i))}return i.stroke!==I&&r.push(l),this._d("rectangle",r,i)}ellipse(t,s,e,n,a){const i=this._o(a),r=[],l=Nt(e,n,i),f=xt(t,s,i,l);if(i.fill)if(i.fillStyle==="solid"){const h=xt(t,s,i,l).opset;h.type="fillPath",r.push(h)}else r.push(Q([f.estimatedPoints],i));return i.stroke!==I&&r.push(f.opset),this._d("ellipse",r,i)}circle(t,s,e,n){const a=this.ellipse(t,s,e,e,n);return a.shape="circle",a}linearPath(t,s){const e=this._o(s);return this._d("linearPath",[it(t,!1,e)],e)}arc(t,s,e,n,a,i,r=!1,l){const f=this._o(l),h=[],d=_t(t,s,e,n,a,i,r,!0,f);if(r&&f.fill)if(f.fillStyle==="solid"){const p=Object.assign({},f);p.disableMultiStroke=!0;const u=_t(t,s,e,n,a,i,!0,!1,p);u.type="fillPath",h.push(u)}else h.push(function(p,u,c,M,g,y,m){const O=p,C=u;let w=Math.abs(c/2),T=Math.abs(M/2);w+=k(.01*w,m),T+=k(.01*T,m);let G=g,E=y;for(;G<0;)G+=2*Math.PI,E+=2*Math.PI;E-G>2*Math.PI&&(G=0,E=2*Math.PI);const st=(E-G)/m.curveStepCount,D=[];for(let V=G;V<=E;V+=st)D.push([O+w*Math.cos(V),C+T*Math.sin(V)]);return D.push([O+w*Math.cos(E),C+T*Math.sin(E)]),D.push([O,C]),Q([D],m)}(t,s,e,n,a,i,f));return f.stroke!==I&&h.push(d),this._d("arc",h,f)}curve(t,s){const e=this._o(s),n=[],a=ye(t,e);if(e.fill&&e.fill!==I&&t.length>=3){const i=qt(function(r,l=0){const f=r.length;if(f<3)throw new Error("A curve must have at least three points.");const h=[];if(f===3)h.push(X(r[0]),X(r[1]),X(r[2]),X(r[2]));else{const d=[];d.push(r[0],r[0]);for(let c=1;c<r.length;c++)d.push(r[c]),c===r.length-1&&d.push(r[c]);const p=[],u=1-l;h.push(X(d[0]));for(let c=1;c+2<d.length;c++){const M=d[c];p[0]=[M[0],M[1]],p[1]=[M[0]+(u*d[c+1][0]-u*d[c-1][0])/6,M[1]+(u*d[c+1][1]-u*d[c-1][1])/6],p[2]=[d[c+1][0]+(u*d[c][0]-u*d[c+2][0])/6,d[c+1][1]+(u*d[c][1]-u*d[c+2][1])/6],p[3]=[d[c+1][0],d[c+1][1]],h.push(p[1],p[2],p[3])}}return h}(t),10,(1+e.roughness)/2);e.fillStyle==="solid"?n.push(at([i],e)):n.push(Q([i],e))}return e.stroke!==I&&n.push(a),this._d("curve",n,e)}polygon(t,s){const e=this._o(s),n=[],a=it(t,!0,e);return e.fill&&(e.fillStyle==="solid"?n.push(at([t],e)):n.push(Q([t],e))),e.stroke!==I&&n.push(a),this._d("polygon",n,e)}path(t,s){const e=this._o(s),n=[];if(!t)return this._d("path",n,e);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=e.fill&&e.fill!=="transparent"&&e.fill!==I,i=e.stroke!==I,r=!!(e.simplification&&e.simplification<1),l=function(f,h,d){const p=Wt(Et(mt(f))),u=[];let c=[],M=[0,0],g=[];const y=()=>{g.length>=4&&c.push(...qt(g,h)),g=[]},m=()=>{y(),c.length&&(u.push(c),c=[])};for(const{key:C,data:w}of p)switch(C){case"M":m(),M=[w[0],w[1]],c.push(M);break;case"L":y(),c.push([w[0],w[1]]);break;case"C":if(!g.length){const T=c.length?c[c.length-1]:M;g.push([T[0],T[1]])}g.push([w[0],w[1]]),g.push([w[2],w[3]]),g.push([w[4],w[5]]);break;case"Z":y(),c.push([M[0],M[1]])}if(m(),!d)return u;const O=[];for(const C of u){const w=me(C,d);w.length&&O.push(w)}return O}(t,1,r?4-4*e.simplification:(1+e.roughness)/2);return a&&(e.fillStyle==="solid"?n.push(at(l,e)):n.push(Q(l,e))),i&&(r?l.forEach(f=>{n.push(it(f,!1,e))}):n.push(function(f,h){const d=Wt(Et(mt(f))),p=[];let u=[0,0],c=[0,0];for(const{key:M,data:g}of d)switch(M){case"M":{const y=1*(h.maxRandomnessOffset||0),m=h.preserveVertices;p.push({op:"move",data:g.map(O=>O+(m?0:k(y,h)))}),c=[g[0],g[1]],u=[g[0],g[1]];break}case"L":p.push(...R(c[0],c[1],g[0],g[1],h)),c=[g[0],g[1]];break;case"C":{const[y,m,O,C,w,T]=g;p.push(...ke(y,m,O,C,w,T,c,h)),c=[w,T];break}case"Z":p.push(...R(c[0],c[1],u[0],u[1],h)),c=[u[0],u[1]]}return{type:"path",ops:p}}(t,e))),this._d("path",n,e)}opsToPath(t,s){let e="";for(const n of t.ops){const a=typeof s=="number"&&s>=0?n.data.map(i=>+i.toFixed(s)):n.data;switch(n.op){case"move":e+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":e+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":e+=`L${a[0]} ${a[1]} `}}return e.trim()}toPaths(t){const s=t.sets||[],e=t.options||this.defaultOptions,n=[];for(const a of s){let i=null;switch(a.type){case"path":i={d:this.opsToPath(a),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:I};break;case"fillPath":i={d:this.opsToPath(a),stroke:I,strokeWidth:0,fill:e.fill||I};break;case"fillSketch":i=this.fillSketch(a,e)}i&&n.push(i)}return n}fillSketch(t,s){let e=s.fillWeight;return e<0&&(e=s.strokeWidth/2),{d:this.opsToPath(t),stroke:s.fill||I,strokeWidth:e,fill:I}}}class xe{constructor(t,s){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new pt(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.ctx,a=t.options.fixedDecimalPlaceDigits;for(const i of s)switch(i.type){case"path":n.save(),n.strokeStyle=e.stroke==="none"?"transparent":e.stroke,n.lineWidth=e.strokeWidth,e.strokeLineDash&&n.setLineDash(e.strokeLineDash),e.strokeLineDashOffset&&(n.lineDashOffset=e.strokeLineDashOffset),this._drawToContext(n,i,a),n.restore();break;case"fillPath":{n.save(),n.fillStyle=e.fill||"";const r=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,i,a,r),n.restore();break}case"fillSketch":this.fillSketch(n,i,e)}}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2),t.save(),e.fillLineDash&&t.setLineDash(e.fillLineDash),e.fillLineDashOffset&&(t.lineDashOffset=e.fillLineDashOffset),t.strokeStyle=e.fill||"",t.lineWidth=n,this._drawToContext(t,s,e.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,s,e,n="nonzero"){t.beginPath();for(const a of s.ops){const i=typeof e=="number"&&e>=0?a.data.map(r=>+r.toFixed(e)):a.data;switch(a.op){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":t.lineTo(i[0],i[1])}}s.type==="fillPath"?t.fill(n):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,s,e,n,a){const i=this.gen.line(t,s,e,n,a);return this.draw(i),i}rectangle(t,s,e,n,a){const i=this.gen.rectangle(t,s,e,n,a);return this.draw(i),i}ellipse(t,s,e,n,a){const i=this.gen.ellipse(t,s,e,n,a);return this.draw(i),i}circle(t,s,e,n){const a=this.gen.circle(t,s,e,n);return this.draw(a),a}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e),e}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e),e}arc(t,s,e,n,a,i,r=!1,l){const f=this.gen.arc(t,s,e,n,a,i,r,l);return this.draw(f),f}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e),e}path(t,s){const e=this.gen.path(t,s);return this.draw(e),e}}const rt="http://www.w3.org/2000/svg";class we{constructor(t,s){this.svg=t,this.gen=new pt(s)}draw(t){const s=t.sets||[],e=t.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,a=n.createElementNS(rt,"g"),i=t.options.fixedDecimalPlaceDigits;for(const r of s){let l=null;switch(r.type){case"path":l=n.createElementNS(rt,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke",e.stroke),l.setAttribute("stroke-width",e.strokeWidth+""),l.setAttribute("fill","none"),e.strokeLineDash&&l.setAttribute("stroke-dasharray",e.strokeLineDash.join(" ").trim()),e.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${e.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS(rt,"path"),l.setAttribute("d",this.opsToPath(r,i)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",e.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,r,e)}l&&a.appendChild(l)}return a}fillSketch(t,s,e){let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);const a=t.createElementNS(rt,"path");return a.setAttribute("d",this.opsToPath(s,e.fixedDecimalPlaceDigits)),a.setAttribute("stroke",e.fill||""),a.setAttribute("stroke-width",n+""),a.setAttribute("fill","none"),e.fillLineDash&&a.setAttribute("stroke-dasharray",e.fillLineDash.join(" ").trim()),e.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${e.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,s){return this.gen.opsToPath(t,s)}line(t,s,e,n,a){const i=this.gen.line(t,s,e,n,a);return this.draw(i)}rectangle(t,s,e,n,a){const i=this.gen.rectangle(t,s,e,n,a);return this.draw(i)}ellipse(t,s,e,n,a){const i=this.gen.ellipse(t,s,e,n,a);return this.draw(i)}circle(t,s,e,n){const a=this.gen.circle(t,s,e,n);return this.draw(a)}linearPath(t,s){const e=this.gen.linearPath(t,s);return this.draw(e)}polygon(t,s){const e=this.gen.polygon(t,s);return this.draw(e)}arc(t,s,e,n,a,i,r=!1,l){const f=this.gen.arc(t,s,e,n,a,i,r,l);return this.draw(f)}curve(t,s){const e=this.gen.curve(t,s);return this.draw(e)}path(t,s){const e=this.gen.path(t,s);return this.draw(e)}}var Pe={canvas:(o,t)=>new xe(o,t),svg:(o,t)=>new we(o,t),generator:o=>new pt(o),newSeed:()=>pt.newSeed()};function St(o,t){const s=document.getElementById(o);if(!s)throw new Error("Could not find element with id "+o+".  Expected type:  "+t.name);if(s instanceof t)return s;throw new Error("Element with id "+o+" has type "+s.constructor.name+".  Expected type:  "+t.name)}const x=14,b=-x,zt=1.5,_=b+zt,N=x-zt,kt=N-_;function tt(o,t,s,e){const n=(e-t)/(s-o);return function(a){return(a-o)*n+t}}const ve=1,Se=99,Ht=tt(x,1,b,.5);function P({x:o,y:t,z:s}){const e=Ht(s),n=tt(b/e,ve,x/e,Se),a=n(o),i=n(-t);return[a,i]}const Vt=St("background",SVGGElement),Qt=St("foreground",SVGGElement),ze=St("main",SVGSVGElement),ct=Pe.svg(ze);function Oe(o,t,s){const e=1-s;return[o[0]*s+t[0]*e,o[1]*s+t[1]*e]}var $,K;const U=class{constructor(t,s,e=s){gt(this,$,void 0);if(this.points=t,this.color=s,this.bounceColor=e,t.length!=4)throw new Error("wtf");this.refresh()}static options(t){return{stroke:"none",fill:t,fillStyle:"zigzag",hachureGap:5,disableMultiStrokeFill:!0,hachureAngle:Math.random()*360}}clear(){j(this,$)&&j(this,$).remove(),nt(this,$,void 0)}refresh(){this.clear(),nt(this,$,ct.polygon(this.points,U.options(this.color))),Vt.appendChild(j(this,$))}highlightPoint(t,s){this.clear();const e=document.createElementNS("http://www.w3.org/2000/svg","g"),n=U.options(this.color),a=ct.polygon(this.points,n);e.appendChild(a),nt(this,$,e),Vt.appendChild(e);const i=P(t),r=s,l=r+350,f=tt(r,.025,l,.5),h=tt(r,2,l,10),d=tt(r,.85,l,.05);let p,u=-1/0;const c=Ct(At({},n),{hachureAngle:n.hachureAngle+45,fillStyle:"cross-hatch",roughness:4,fill:this.bounceColor}),M=g=>{if(!(g<u))if(u=g+100+Math.random()*75,p&&(p.remove(),p=void 0),g>l)j(U,K).delete(this);else{const y=f(g);if(!isFinite(y)||y<0||y>1)debugger;const m=this.points.map(O=>Oe(O,i,y));c.hachureGap=h(g),c.fillWeight=d(g),p=ct.polygon(m,c),e.appendChild(p)}};j(U,K).set(this,M)}static timerUpdate(t){for(const s of j(this,K).values())s(t)}};let F=U;$=new WeakMap,K=new WeakMap,gt(F,K,new Map);const Ut=new F([P({x:b,y:b,z:b}),P({x:b,y:x,z:b}),P({x:b,y:x,z:x}),P({x:b,y:b,z:x})],"#008000"),Kt=new F([P({x,y:b,z:b}),P({x,y:x,z:b}),P({x,y:x,z:x}),P({x,y:b,z:x})],"#000080"),Jt=new F([P({x:b,y:x,z:b}),P({x,y:x,z:b}),P({x,y:x,z:x}),P({x:b,y:x,z:x})],"#808000"),Xt=new F([P({x:b,y:b,z:b}),P({x,y:b,z:b}),P({x,y:b,z:x}),P({x:b,y:b,z:x})],"#008080"),Yt=new F([P({x:b,y:b,z:b}),P({x,y:b,z:b}),P({x,y:x,z:b}),P({x:b,y:x,z:b})],"#800000");window.walls={top:Jt,bottom:Xt,left:Ut,right:Kt,back:Yt};function Le(o,t=!1){const s=(t?2.5:1)*zt*Ht(o.z)*2,[e,n]=P(o),a=ct.circle(e,n,s,{fill:"#ffa0a0",stroke:"none",strokeWidth:.2,disableMultiStroke:!0,fillStyle:"solid",roughness:t?1:.3333,curveStepCount:t?50:9});return Qt.appendChild(a),a}const v={x:Math.random()*kt+_,y:Math.random()*kt+_,z:Math.random()*kt+_},z={x:Math.random()*50-25,y:Math.random()*50-25,z:Math.random()*50-25};let bt,q=-1/0;function Te(o){if(bt!==void 0){const t=(o-bt)/1e3;if(t<=0)return;v.x+=z.x*t,v.x<_?(v.x=_,z.x=Math.abs(z.x),Ut.highlightPoint(v,o),q=-1/0):v.x>N&&(v.x=N,z.x=-Math.abs(z.x),Kt.highlightPoint(v,o),q=-1/0),v.y+=z.y*t,v.y<_?(v.y=_,z.y=Math.abs(z.y),Xt.highlightPoint(v,o),q=-1/0):v.y>N&&(v.y=N,z.y=-Math.abs(z.y),Jt.highlightPoint(v,o),q=-1/0),v.z+=z.z*t,v.z<_?(v.z=_,z.z=Math.abs(z.z),Yt.highlightPoint(v,o),q=-1/0):v.z>N&&(v.z=N,z.z=-Math.abs(z.z),Pt=!0,q=-1/0)}bt=o}let Pt=!1,Y;function Ie(o){o.classList.add("fade"),setTimeout(()=>o.remove(),500)}function te(o){requestAnimationFrame(te),Te(o),o>q&&(Y&&(Ie(Y),Y=void 0),Y=Le(v,Pt),Pt=!1,Qt.appendChild(Y),q=o+100+Math.random()*100),F.timerUpdate(o)}requestAnimationFrame(te);
